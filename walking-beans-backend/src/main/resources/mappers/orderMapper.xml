<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="walking_beans.walking_beans_backend.mapper.OrderMapper">
    <!-- 주문 데이터 저장 Orders-->
    <insert id="insertOrder" parameterType="walking_beans.walking_beans_backend.model.dto.Orders" useGeneratedKeys="true" keyProperty="orderId">
        INSERT INTO orders
        (user_id, store_id, address_id, order_status, order_requests, order_total_price, order_create_date, order_modified_date)
        VALUES
            (#{userId}, #{storeId}, #{addressId}, #{orderStatus}, #{orderRequests}, #{orderTotalPrice}, #{riderIdOnDuty}, NOW(), NOW());
    </insert>

    <!-- 주문정보 가져오기 -->
    <select id="findOrderById" resultType="walking_beans.walking_beans_backend.model.dto.Orders">
        SELECT *
        FROM orders
        WHERE order_id = #{orderId}
    </select>

    <!-- 주문자 정보 가져오기 -->
    <select id="findOrdersByUserId" resultType="walking_beans.walking_beans_backend.model.dto.Orders">
        SELECT *
        FROM orders
        WHERE user_id = #{userId}
    </select>
</mapper>